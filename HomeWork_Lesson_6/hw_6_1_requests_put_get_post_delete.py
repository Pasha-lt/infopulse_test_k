# –ó–∞–¥–∞–Ω–∏–µ 1 (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –≤—Å–µ–º, –∫—Ä–æ–º–µ —á–∞—Å—Ç–∏ —Å–æ –∑–≤—ë–∑–¥–æ—á–∫–æ–π!!!!)
# –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å REST API: http://pulse-rest-testing.herokuapp.com/
# –°–æ–∑–¥–∞—ë–º –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç:
#     ‚Ä¢ –°–æ–∑–¥–∞—ë–º –∫–Ω–∏–≥—É POST /books/, –≤—ã –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç–µ –µ–≥–æ id.
#     ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ, —á—Ç–æ –æ–Ω–∞ —Å–æ–∑–¥–∞–ª–∞—Å—å –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ GET/books/[id]
#     ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ, —á—Ç–æ –æ–Ω–∞ –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∫–Ω–∏–≥ –ø–æ –∑–∞–ø—Ä–æ—Å—É GET /books/
#     ‚Ä¢ –ò–∑–º–µ–Ω—è–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –∫–Ω–∏–≥–∏ –º–µ—Ç–æ–¥–æ–º PUT /books/[id]/
#     ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ, —á—Ç–æ –æ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ /books/[id]
#     ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ, —á—Ç–æ –æ–Ω–∞ –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∫–Ω–∏–≥ –ø–æ GET /books/ —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
#     ‚Ä¢ –£–¥–∞–ª—è–µ—Ç–µ —ç—Ç—É –∫–Ω–∏–≥—É –º–µ—Ç–æ–¥–æ–º DELETE /books/[id].
# –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ, –∞ –Ω–µ –≥–ª–∞–∑–∞–º–∏, —Ç.–µ. –ø—Ä–æ–≤–µ—Ä–∏—Ç—å,
# —á—Ç–æ –≤ —Ç–µ–ª–µ response –¥–∞–Ω–Ω—ã–µ —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –≤ –≤–∞—à–µ–º –∏—Å—Ö–æ–¥–Ω–æ–º —Å–ª–æ–≤–∞—Ä–µ –ø—É—Ç—ë–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–ª–æ–≤–∞—Ä—è—Ö
#
# –í—Ç–æ—Ä–æ–π —Å–∫—Ä–∏–ø—Ç:
# —Ç–æ–∂–µ —Å–∞–º–æ–µ —Å —Ä–æ–ª—è–º–∏. –ó–¥–µ—Å—å –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–π, —Ç.–∫. –µ—Å—Ç—å —Å–≤—è–∑–∫–∞ —Å –∫–Ω–∏–≥–æ–π, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å.
# –°–æ–∑–¥–∞–π—Ç–µ –∫–Ω–∏–≥—É –∑–∞—Ä–∞–Ω–µ–µ –≤ —ç—Ç–æ–º –∂–µ —Å–∫—Ä–∏–ø—Ç–µ, –Ω–µ –Ω–∞–¥–µ–π—Ç–µ—Å—å –Ω–∞ –∫–Ω–∏–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–∏–¥–∏—Ç–µ, –∏—Ö –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å.
#
# –¢—Ä–µ—Ç–∏–π —Å–∫—Ä–∏–ø—Ç:
# –ü–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–Ω–∏–≥–∏ –∏ —Ä–æ–ª–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–ª–æ –∏ —Å—Ç–∞—Ç—É—Å –∫–æ–¥ –æ—Ç–≤–µ—Ç–æ–≤.
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–Ω–∏–≥—É, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–ª–æ –∏ —Å—Ç–∞—Ç—É—Å –∫–æ–¥ response.
# ** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è http.client –≤–º–µ—Å—Ç–æ requests. –û—â—É—Ç–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É üòä

import requests

# –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª
# t = requests.get('http://pulse-rest-testing.herokuapp.com/books')
# print(t.json()[0]) # –ë–µ—Ä–µ–º –æ–¥–Ω—É –∫–Ω–∏–≥—É —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –∫–ª—é—á–∏ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
# print(t.url)  # –ï—Å–ª–∏ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ –≤—ã–≤–æ–¥–∏–º
# print(t.text)  # –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞
# print(t.status_code)  # —Å—Ç–∞—Ç—É—Å –∫–æ–¥
# print(t.headers)  # –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
########################################

# #Script 1
# # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–Ω–∏–≥—É
# payload = {'title': 'Son of the Wolf', 'author': 'Jack London'}
# r = requests.post('http://pulse-rest-testing.herokuapp.com/books', data=payload)
# print(r.text)  # –≤—ã–≤–æ–¥–∏—Ç —á—Ç–æ –º—ã —Å–æ—Å–∑–∞–¥–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –∞–π–¥–∏
# print(r.json()['id'])
# id_my_book = r.json()['id']
#
# # –ü–æ–ª—É—á–∞–µ–º –Ω—É–∂–Ω–æ—É—é –Ω–∞–º –∫–Ω–∏–≥—É.
# t = requests.get(f'http://pulse-rest-testing.herokuapp.com/books/{id_my_book}')
# assert t.json()['id'] == id_my_book and t.json()['title'] == 'Son of the Wolf' and t.json()['author']=='Jack London'
# print('–ö–Ω–∏–≥–∞ —Å–æ–∑–¥–∞–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')
#
# # –º–µ–Ω—è–µ–º –∫–Ω–∏–≥—É
# payload = {'title': "The Lancer's Wife", 'author': "Guy de Maupassant"}
# q = requests.put(f'http://pulse-rest-testing.herokuapp.com/books/{id_my_book}', data=payload)
# print(q.text)  # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞—à–µ–≥–æ –∏–∑–º–∏–Ω–µ–Ω–∏—è
#
# # –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–∏–Ω–µ–Ω–∏—è
# t = requests.get(f'http://pulse-rest-testing.herokuapp.com/books/{id_my_book}')
# assert t.json()['id'] == id_my_book and t.json()['title'] == "The Lancer's Wife" and t.json()['author']=="Guy de Maupassant"
# print('–ö–Ω–∏–≥–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')
# print(t.json())
#
# # –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—å–µ–∫—Ç–∞
# d = requests.delete(f'http://pulse-rest-testing.herokuapp.com/books/{id_my_book}')
# assert d.status_code == 204
# print('–ö–Ω–∏–≥–∞ —É–¥–∞–ª–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')
#
# ################################
# Script 2
# –°–æ–∑–¥–∞–µ–º –∫–Ω–∏–≥—É
payload = {'title': 'Son of the Wolf', 'author': 'Jack London'}
r = requests.post('http://pulse-rest-testing.herokuapp.com/books', data=payload)
print(r.text)  # –≤—ã–≤–æ–¥–∏—Ç —á—Ç–æ –º—ã —Å–æ—Å–∑–∞–¥–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –∞–π–¥–∏
print(r.json()['id'])
id_my_book = r.json()['id']

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–∏–≥—É
t = requests.get(f'http://pulse-rest-testing.herokuapp.com/books/{id_my_book}')
assert t.json()['id'] == id_my_book and t.json()['title'] == 'Son of the Wolf' and t.json()['author'] == 'Jack London'
print('–ö–Ω–∏–≥–∞ —Å–æ–∑–¥–∞–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')

# –°–æ–∑–¥–∞–µ–º –ü–µ—Ä—Å–æ–Ω–∞–∂–∞
payload = {'name': 'young wolf', 'type': 'Wolf', 'level': 5, 'book': f'{id_my_book}'}
r = requests.post('http://pulse-rest-testing.herokuapp.com/roles', data=payload)
id_person = r.json()['id']

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–Ω–æ–≥–æ –Ω–∞–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.
t = requests.get(f'http://pulse-rest-testing.herokuapp.com/roles/{id_person}')
assert t.json()['id'] == id_person and t.json()['name'] == 'young wolf' and t.json()['type'] == 'Wolf' and t.json()[
    'level'] == 5
print('–ü–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–ª—Å—è —É—Å–ø–µ—à–Ω–æ')

# –º–µ–Ω—è–µ–º –ª–µ–≤–µ–ª –∏ —Ç–∏–ø –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
payload = {'name': 'young wolf', 'type': 'Wolf+', 'level': 10, 'book': f'{id_my_book}'}
r = requests.put(f'http://pulse-rest-testing.herokuapp.com/roles/{id_person}', data=payload)

# –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–∏–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
assert r.json()['id'] == id_person and r.json()['name'] == 'young wolf' and r.json()['type'] == 'Wolf+' and r.json()[
    'level'] == 10
print('–ü–µ—Ä—Å–æ–Ω–∞–∂ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')
print(r.json())

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
d = requests.delete(f'http://pulse-rest-testing.herokuapp.com/books/{id_my_book}')
assert d.status_code == 204
print('–ö–Ω–∏–≥–∞ —É–¥–∞–ª–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')

# –£–¥–∞–ª–µ–Ω–∏–µ –ü–µ—Ä—Å–æ–Ω–∞–∂–∞
d = requests.delete(f'http://pulse-rest-testing.herokuapp.com/roles/{id_person}')
assert d.status_code == 204
print('–ü–µ—Ä—Å–æ–Ω–∞–∂ —É–¥–∞–ª–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ')
################################
# # —É–¥–∞–ª–µ–Ω–∏–µ —Ü–∏–∫–ª–æ–º –ø–æ –∞–π–¥–∏
# for number in range(1541, 1555):
#     t = requests.get(f'http://pulse-rest-testing.herokuapp.com/books/{number}')
#     if t.status_code == 404:
#         print(f'c —Ç–∞–∫–∏–º –∞–π–¥–∏ –Ω–µ—Ç {number}')
#     else:
#         print(f'–£–¥–∞–ª—è–µ–º {t.json()}')
#         d = requests.delete(f'http://pulse-rest-testing.herokuapp.com/books/{number}')

# –ø–µ—Ä–µ–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–≥–µ–Ω—Ç
# url = 'https://api.github.com/some/endpoint'
# headers = {'user-agent': 'my-app/0.0.1'}
# r = requests.get(url, headers=headers)

# pprint.pprint(t.json())
